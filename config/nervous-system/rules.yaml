# Nervous System Rules Configuration
# Maps (source, type) pairs to baseline priority, urgency, and LLM evaluation settings.

# Default rule for unknown (source, type) pairs
default:
  priority: NORMAL
  urgency: DEFERRABLE
  llm_evaluate: true

# Rules keyed by source/type
rules:
  # --- Tracking events ---
  tracking/snap_detected:
    priority: HIGH
    urgency: IMMEDIATE
    llm_evaluate: false
    inject_template: "You heard a sharp snap nearby."

  tracking/person_detected:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: true
    inject_template: "Someone just came into view."

  tracking/person_lost:
    priority: LOW
    urgency: DEFERRABLE
    llm_evaluate: false
    inject_template: "The person you were looking at walked away."

  tracking/mode_changed:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  # --- Vision events ---
  vision/vision_description:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: true
    inject_template: "Right now you see: {description}"

  vision/analysis_started:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  # --- Slack events ---
  slack/slack_mention:
    priority: HIGH
    urgency: IMMEDIATE
    llm_evaluate: false
    inject_template: "{user} just mentioned you on Slack: {text}"

  slack/slack_message:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: true
    inject_template: "New Slack message from {user}: {text}"

  slack/slack_dm:
    priority: HIGH
    urgency: IMMEDIATE
    llm_evaluate: false
    inject_template: "{user} sent you a direct message on Slack: {text}"

  slack/slack_reaction:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  # --- Browser events ---
  browser/task_completed:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: false
    inject_template: "You found this: {result}"

  browser/progress:
    priority: LOW
    urgency: DEFERRABLE
    llm_evaluate: false
    inject_template: "Still looking... {message}"

  browser/task_started:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  # --- Memory events ---
  memory/query_result:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: false
    inject_template: "You remember: {result}"

  memory/store_result:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  memory/startup_context:
    priority: NORMAL
    urgency: NOW
    llm_evaluate: false
    inject_template: "Things you know: {context}"

  # --- Emotion events ---
  emotions/wound_created:
    priority: HIGH
    urgency: NOW
    llm_evaluate: false
    inject_template: "That really hurt."

  emotions/wound_healed:
    priority: NORMAL
    urgency: DEFERRABLE
    llm_evaluate: false

  emotions/mood_changed:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false

  # --- Heartbeat ---
  heartbeat/tick:
    priority: LOW
    urgency: BACKGROUND
    llm_evaluate: false
